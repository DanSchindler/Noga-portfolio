import React, { useEffect, useState } from "react";
import { Link, useLocation } from "react-router-dom";
import { motion } from "framer-motion";
import { navBarOptions } from "../constans";
import "../App.css";

const NavBar = () => {
  const location = useLocation();
  const [selectedTab, setSelectedTab] = useState(() => {
    if (location.pathname.startsWith("/about")) {
      return navBarOptions.about;
    }
    return navBarOptions.portfolio;
  });

  useEffect(() => {
    if (
      location.pathname.startsWith("/portfolio") ||
      location.pathname.startsWith("/project")
    ) {
      setSelectedTab(navBarOptions.portfolio);
    } else if (location.pathname === "/") {
      setSelectedTab(navBarOptions.portfolio);
    } else {
      setSelectedTab(navBarOptions.about); // Default to about for other routes
    }
  }, [location.pathname]);

  return (
    <div className="navbar-container">
      <div className="logo">
        <Link to="/">
          <svg
            className="logo-svg"
            width="316"
            height="75"
            viewBox="0 0 316 75"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M30.35 55H26.85L7.5 25.6V55H4V20.05H7.5L26.85 49.4V20.05H30.35V55ZM50.2273 55.4C47.6607 55.4 45.344 54.8333 43.2773 53.7C41.244 52.5333 39.6273 50.9 38.4273 48.8C37.2607 46.6667 36.6773 44.1833 36.6773 41.35C36.6773 38.5167 37.2773 36.05 38.4773 33.95C39.6773 31.8167 41.3107 30.1833 43.3773 29.05C45.444 27.8833 47.7607 27.3 50.3273 27.3C52.894 27.3 55.2107 27.8833 57.2773 29.05C59.3773 30.1833 61.0107 31.8167 62.1773 33.95C63.3773 36.05 63.9773 38.5167 63.9773 41.35C63.9773 44.15 63.3773 46.6167 62.1773 48.75C60.9773 50.8833 59.3273 52.5333 57.2273 53.7C55.1273 54.8333 52.794 55.4 50.2273 55.4ZM50.2273 52.35C52.0273 52.35 53.694 51.95 55.2273 51.15C56.7607 50.3167 57.994 49.0833 58.9273 47.45C59.894 45.7833 60.3773 43.75 60.3773 41.35C60.3773 38.95 59.9107 36.9333 58.9773 35.3C58.044 33.6333 56.8107 32.4 55.2773 31.6C53.744 30.7667 52.0773 30.35 50.2773 30.35C48.4773 30.35 46.8107 30.7667 45.2773 31.6C43.744 32.4 42.5107 33.6333 41.5773 35.3C40.6773 36.9333 40.2273 38.95 40.2273 41.35C40.2273 43.75 40.6773 45.7833 41.5773 47.45C42.5107 49.0833 43.7273 50.3167 45.2273 51.15C46.7607 51.95 48.4273 52.35 50.2273 52.35ZM81.8074 27.3C84.3741 27.3 86.6074 27.9 88.5074 29.1C90.4074 30.3 91.7741 31.8167 92.6074 33.65V27.7H96.1074V55.7C96.1074 58.2 95.5574 60.4167 94.4574 62.35C93.3908 64.2833 91.8908 65.7667 89.9574 66.8C88.0241 67.8667 85.8241 68.4 83.3574 68.4C79.8574 68.4 76.9408 67.5667 74.6074 65.9C72.3074 64.2333 70.8741 61.9667 70.3074 59.1H73.7574C74.3574 61 75.4908 62.5167 77.1574 63.65C78.8574 64.7833 80.9241 65.35 83.3574 65.35C85.1241 65.35 86.7074 64.9667 88.1074 64.2C89.5074 63.4667 90.6074 62.3667 91.4074 60.9C92.2074 59.4333 92.6074 57.7 92.6074 55.7V48.95C91.7408 50.8167 90.3574 52.3667 88.4574 53.6C86.5908 54.8 84.3741 55.4 81.8074 55.4C79.3074 55.4 77.0574 54.8167 75.0574 53.65C73.0908 52.4833 71.5408 50.8333 70.4074 48.7C69.3074 46.5667 68.7574 44.1 68.7574 41.3C68.7574 38.5 69.3074 36.05 70.4074 33.95C71.5408 31.8167 73.0908 30.1833 75.0574 29.05C77.0574 27.8833 79.3074 27.3 81.8074 27.3ZM92.6074 41.35C92.6074 39.15 92.1574 37.2167 91.2574 35.55C90.3574 33.8833 89.1241 32.6 87.5574 31.7C86.0241 30.8 84.3241 30.35 82.4574 30.35C80.5241 30.35 78.7908 30.7833 77.2574 31.65C75.7241 32.5167 74.5074 33.7833 73.6074 35.45C72.7408 37.0833 72.3074 39.0333 72.3074 41.3C72.3074 43.5333 72.7408 45.5 73.6074 47.2C74.5074 48.8667 75.7241 50.15 77.2574 51.05C78.7908 51.9167 80.5241 52.35 82.4574 52.35C84.3241 52.35 86.0241 51.9 87.5574 51C89.1241 50.1 90.3574 48.8167 91.2574 47.15C92.1574 45.4833 92.6074 43.55 92.6074 41.35ZM102.498 41.3C102.498 38.5 103.048 36.05 104.148 33.95C105.281 31.8167 106.831 30.1833 108.798 29.05C110.798 27.8833 113.048 27.3 115.548 27.3C118.148 27.3 120.381 27.9 122.248 29.1C124.148 30.3 125.514 31.8333 126.348 33.7V27.7H129.848V55H126.348V48.95C125.481 50.8167 124.098 52.3667 122.198 53.6C120.331 54.8 118.098 55.4 115.498 55.4C113.031 55.4 110.798 54.8167 108.798 53.65C106.831 52.4833 105.281 50.8333 104.148 48.7C103.048 46.5667 102.498 44.1 102.498 41.3ZM126.348 41.35C126.348 39.15 125.898 37.2167 124.998 35.55C124.098 33.8833 122.864 32.6 121.298 31.7C119.764 30.8 118.064 30.35 116.198 30.35C114.264 30.35 112.531 30.7833 110.998 31.65C109.464 32.5167 108.248 33.7833 107.348 35.45C106.481 37.0833 106.048 39.0333 106.048 41.3C106.048 43.5333 106.481 45.5 107.348 47.2C108.248 48.8667 109.464 50.15 110.998 51.05C112.531 51.9167 114.264 52.35 116.198 52.35C118.064 52.35 119.764 51.9 121.298 51C122.864 50.1 124.098 48.8167 124.998 47.15C125.898 45.4833 126.348 43.55 126.348 41.35ZM170.159 55L161.509 40.4H155.059V55H151.559V20.05H162.059C165.959 20.05 168.909 20.9833 170.909 22.85C172.942 24.7167 173.959 27.1667 173.959 30.2C173.959 32.7333 173.225 34.9 171.759 36.7C170.325 38.4667 168.192 39.6167 165.359 40.15L174.359 55H170.159ZM155.059 37.55H162.109C164.842 37.55 166.892 36.8833 168.259 35.55C169.659 34.2167 170.359 32.4333 170.359 30.2C170.359 27.9 169.692 26.1333 168.359 24.9C167.025 23.6333 164.925 23 162.059 23H155.059V37.55ZM192.854 55.4C190.288 55.4 187.971 54.8333 185.904 53.7C183.871 52.5333 182.254 50.9 181.054 48.8C179.888 46.6667 179.304 44.1833 179.304 41.35C179.304 38.5167 179.904 36.05 181.104 33.95C182.304 31.8167 183.938 30.1833 186.004 29.05C188.071 27.8833 190.388 27.3 192.954 27.3C195.521 27.3 197.838 27.8833 199.904 29.05C202.004 30.1833 203.638 31.8167 204.804 33.95C206.004 36.05 206.604 38.5167 206.604 41.35C206.604 44.15 206.004 46.6167 204.804 48.75C203.604 50.8833 201.954 52.5333 199.854 53.7C197.754 54.8333 195.421 55.4 192.854 55.4ZM192.854 52.35C194.654 52.35 196.321 51.95 197.854 51.15C199.388 50.3167 200.621 49.0833 201.554 47.45C202.521 45.7833 203.004 43.75 203.004 41.35C203.004 38.95 202.538 36.9333 201.604 35.3C200.671 33.6333 199.438 32.4 197.904 31.6C196.371 30.7667 194.704 30.35 192.904 30.35C191.104 30.35 189.438 30.7667 187.904 31.6C186.371 32.4 185.138 33.6333 184.204 35.3C183.304 36.9333 182.854 38.95 182.854 41.35C182.854 43.75 183.304 45.7833 184.204 47.45C185.138 49.0833 186.354 50.3167 187.854 51.15C189.388 51.95 191.054 52.35 192.854 52.35ZM222.384 55.4C219.251 55.4 216.684 54.6833 214.684 53.25C212.718 51.7833 211.618 49.8 211.384 47.3H214.984C215.151 48.8333 215.868 50.0833 217.134 51.05C218.434 51.9833 220.168 52.45 222.334 52.45C224.234 52.45 225.718 52 226.784 51.1C227.884 50.2 228.434 49.0833 228.434 47.75C228.434 46.8167 228.134 46.05 227.534 45.45C226.934 44.85 226.168 44.3833 225.234 44.05C224.334 43.6833 223.101 43.3 221.534 42.9C219.501 42.3667 217.851 41.8333 216.584 41.3C215.318 40.7667 214.234 39.9833 213.334 38.95C212.468 37.8833 212.034 36.4667 212.034 34.7C212.034 33.3667 212.434 32.1333 213.234 31C214.034 29.8667 215.168 28.9667 216.634 28.3C218.101 27.6333 219.768 27.3 221.634 27.3C224.568 27.3 226.934 28.05 228.734 29.55C230.534 31.0167 231.501 33.05 231.634 35.65H228.134C228.034 34.05 227.401 32.7667 226.234 31.8C225.101 30.8 223.534 30.3 221.534 30.3C219.768 30.3 218.334 30.7167 217.234 31.55C216.134 32.3833 215.584 33.4167 215.584 34.65C215.584 35.7167 215.901 36.6 216.534 37.3C217.201 37.9667 218.018 38.5 218.984 38.9C219.951 39.2667 221.251 39.6833 222.884 40.15C224.851 40.6833 226.418 41.2 227.584 41.7C228.751 42.2 229.751 42.9333 230.584 43.9C231.418 44.8667 231.851 46.15 231.884 47.75C231.884 49.2167 231.484 50.5333 230.684 51.7C229.884 52.8333 228.768 53.7333 227.334 54.4C225.901 55.0667 224.251 55.4 222.384 55.4ZM251.273 27.2C254.539 27.2 257.206 28.2167 259.273 30.25C261.339 32.25 262.373 35.1667 262.373 39V55H258.923V39.4C258.923 36.4333 258.173 34.1667 256.673 32.6C255.206 31.0333 253.189 30.25 250.623 30.25C247.989 30.25 245.889 31.0833 244.323 32.75C242.756 34.4167 241.973 36.8667 241.973 40.1V55H238.473V27.7H241.973V32.35C242.839 30.6833 244.089 29.4167 245.723 28.55C247.356 27.65 249.206 27.2 251.273 27.2ZM294.813 39.95C294.813 41.15 294.78 42.0667 294.713 42.7H272.063C272.163 44.7667 272.663 46.5333 273.563 48C274.463 49.4667 275.647 50.5833 277.113 51.35C278.58 52.0833 280.18 52.45 281.913 52.45C284.18 52.45 286.08 51.9 287.613 50.8C289.18 49.7 290.213 48.2167 290.713 46.35H294.413C293.747 49.0167 292.313 51.2 290.113 52.9C287.947 54.5667 285.213 55.4 281.913 55.4C279.347 55.4 277.047 54.8333 275.013 53.7C272.98 52.5333 271.38 50.9 270.213 48.8C269.08 46.6667 268.513 44.1833 268.513 41.35C268.513 38.5167 269.08 36.0333 270.213 33.9C271.347 31.7667 272.93 30.1333 274.963 29C276.997 27.8667 279.313 27.3 281.913 27.3C284.513 27.3 286.78 27.8667 288.713 29C290.68 30.1333 292.18 31.6667 293.213 33.6C294.28 35.5 294.813 37.6167 294.813 39.95ZM291.263 39.85C291.297 37.8167 290.88 36.0833 290.013 34.65C289.18 33.2167 288.03 32.1333 286.563 31.4C285.097 30.6667 283.497 30.3 281.763 30.3C279.163 30.3 276.947 31.1333 275.113 32.8C273.28 34.4667 272.263 36.8167 272.063 39.85H291.263ZM304.717 32.55C305.483 30.85 306.65 29.5333 308.217 28.6C309.817 27.6667 311.767 27.2 314.067 27.2V30.85H313.117C310.583 30.85 308.55 31.5333 307.017 32.9C305.483 34.2667 304.717 36.55 304.717 39.75V55H301.217V27.7H304.717V32.55Z"
              fill="black"
            />
            <circle cx="50.5" cy="41.5" r="12.5" fill="black" />
            <circle cx="193.5" cy="41.5" r="12.5" fill="black" />
          </svg>
        </Link>
      </div>
      <div className="nav-list-container">
        <nav className="navbar-list">
          <Link
            to="/about"
            key={navBarOptions.about}
            className={"about"}
            onClick={() => setSelectedTab(navBarOptions.about)}
          >
            About
            {selectedTab === navBarOptions.about && (
              <motion.div
                className="underline underline-about"
                layoutId="underline"
              />
            )}
          </Link>
          <Link
            to="/"
            key={navBarOptions.portfolio}
            className={"portfolio"}
            onClick={() => setSelectedTab(navBarOptions.portfolio)}
          >
            Portfolio
            {selectedTab === navBarOptions.portfolio && (
              <motion.div
                className="underline underline-portfolio"
                layoutId="underline"
              />
            )}
          </Link>
        </nav>
        <main></main>
      </div>
    </div>
  );
};

export default NavBar;
